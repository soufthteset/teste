-- Carregar a biblioteca Orion 
local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/CatwalkOPS/Orion/refs/heads/main/source')))()
local Window = OrionLib:MakeWindow({Name = "SOUFTH MENU üéÑ", HidePremium = false, SaveConfig = true, ConfigFolder = "TestConfig"})

-- Criar a aba ESP
local Tab1 = Window:MakeTab({
    Name = "ESP",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- Vari√°veis para controle do ESP
local espEnabled = false
local espLines = {}
local espBillboards = {}
local selectedColor = Color3.new(1, 0, 0) -- Cor padr√£o: vermelho
local espRadius = 500 -- Raio padr√£o (Valor inicial entre 200 e 5,000,000)
local showDistance = false -- Flag para mostrar a dist√¢ncia

-- Vari√°veis adicionais para Friend ESP
local selectedFriend = nil
local isFriendMode = false
local espRGBColor = Color3.new(1, 0, 0) -- Cor padr√£o para RGB (ser√° animada)

-- Fun√ß√£o para criar a InfoBox
local function createInfoBox(funcName, status)
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = funcName,
        Text = status,
        Duration = 5
    })
end

-- Fun√ß√£o para ativar ou desativar o ESP
local function toggleESP()
    espEnabled = not espEnabled

    if espEnabled then
        -- Ativar ESP
        local localPlayer = game.Players.LocalPlayer
        local localCharacter = localPlayer.Character or localPlayer.CharacterAdded:Wait()

        -- Conectar ao Heartbeat uma vez para a atualiza√ß√£o cont√≠nua
        local espConnection = game:GetService("RunService").Heartbeat:Connect(function()
            if not espEnabled then
                espConnection:Disconnect()  -- Desconectar ao desativar o ESP
                return
            end

            for _, player in pairs(game.Players:GetPlayers()) do
                if player ~= localPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                    if not isFriendMode or (isFriendMode and player == selectedFriend) then
                        local localPos, onScreen1 = workspace.CurrentCamera:WorldToViewportPoint(localCharacter.HumanoidRootPart.Position)
                        local targetPos, onScreen2 = workspace.CurrentCamera:WorldToViewportPoint(player.Character.HumanoidRootPart.Position)

                        -- Calcular a dist√¢ncia
                        local distance = (localCharacter.HumanoidRootPart.Position - player.Character.HumanoidRootPart.Position).Magnitude

                        -- Criar ou atualizar a linha e o nome do jogador
                        if onScreen1 and onScreen2 and distance <= espRadius then
                            if not espLines[player] then
                                espLines[player] = Drawing.new("Line")
                            end

                            local line = espLines[player]
                            line.From = Vector2.new(localPos.X, localPos.Y)
                            line.To = Vector2.new(targetPos.X, targetPos.Y)
                            line.Color = isFriendMode and espRGBColor or selectedColor
                            line.Visible = true
                        end
                    end
                end
            end
        end)

    else
        -- Desativar ESP e remover linhas
        for _, line in pairs(espLines) do
            line:Remove()
        end
        espLines = {}
    end
    createInfoBox("ESP", "ESP ativado/desativado com sucesso!")
end

-- Fun√ß√£o para obter a cor RGB animada
local function getRGB()
    local hue = tick() % 5 / 5
    return Color3.fromHSV(hue, 1, 1)
end

-- Atualizar a cor RGB continuamente
game:GetService("RunService").Heartbeat:Connect(function()
    if isFriendMode and espEnabled then
        espRGBColor = getRGB()
    end
end)

-- Fun√ß√£o para selecionar um jogador como Friend
local function selectFriend(player)
    selectedFriend = player
    createInfoBox("Friend ESP", "Voc√™ selecionou: " .. player.Name)
end

-- Checkbox para ativar/desativar Friend ESP
Tab1:AddToggle({
    Name = "Friend ESP",
    Default = false,
    Callback = function(state)
        isFriendMode = state
    end
})

-- Fun√ß√£o para atualizar a lista de jogadores no Dropdown
local function updatePlayerList()
    local playerNames = {}
    for _, player in pairs(game.Players:GetPlayers()) do
        table.insert(playerNames, player.Name)
    end
    return playerNames
end

-- Dropdown para selecionar o jogador amigo
Tab1:AddDropdown({
    Name = "Selecione um Amigo",
    Options = updatePlayerList(),
    Callback = function(option)
        for _, player in pairs(game.Players:GetPlayers()) do
            if player.Name == option then
                selectFriend(player)
                break
            end
        end
    end
})

-- Checkbox para mostrar ou esconder a dist√¢ncia
Tab1:AddToggle({
    Name = "Mostrar Dist√¢ncia",
    Default = false,
    Callback = function(state)
        showDistance = state
    end
})

-- Dropdown para selecionar a cor da linha
local colors = {
    {Name = "Red", Color = Color3.new(1, 0, 0)},
    {Name = "Green", Color = Color3.new(0, 1, 0)},
    {Name = "Blue", Color = Color3.new(0, 0, 1)},
    {Name = "Yellow", Color = Color3.new(1, 1, 0)},
    {Name = "White", Color = Color3.new(1, 1, 1)},
    {Name = "Purple", Color = Color3.new(0.5, 0, 0.5)},
    {Name = "Cyan", Color = Color3.new(0, 1, 1)},
    {Name = "Orange", Color = Color3.new(1, 0.5, 0)}
}

local colorOptions = {}
for _, col in pairs(colors) do
    table.insert(colorOptions, col.Name)
end

Tab1:AddDropdown({
    Name = "Selecione a Cor da Linha ESP",
    Options = colorOptions,
    CurrentOption = "Red",
    Flag = "ESPLineColor",
    Callback = function(option)
        for _, col in pairs(colors) do
            if col.Name == option then
                selectedColor = col.Color
                break
            end
        end
    end
})

-- Slider para ajustar o raio do ESP (m√≠nimo 200, m√°ximo 5,000,000)
Tab1:AddSlider({
    Name = "Raio do ESP",
    Min = 200,
    Max = 5000000,
    Default = espRadius,
    Color = Color3.fromRGB(255, 255, 255),
    Increment = 10,
    Callback = function(value)
        espRadius = value
    end
})

-- Bot√£o para ativar/desativar ESP
Tab1:AddButton({
    Name = "ESP Lines",
    Callback = function()
        toggleESP()
    end
})

-- Criar a aba HUBS
local Tab2 = Window:MakeTab({
    Name = "HUBS",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- Fun√ß√µes para FE SCRIPTS
local function onButtonClick()
    createInfoBox("InfiniteYield", "Carregando InfiniteYield...")
    loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
    createInfoBox("InfiniteYield", "InfiniteYield carregado com sucesso!")
end

local function InvisExec()
    createInfoBox("Fe Invisible", "Carregando Fe Invisible...")
    loadstring(game:HttpGet("https://pastebin.com/raw/c3vgfjhn"))()
    createInfoBox("Fe Invisible", "Fe Invisible carregado com sucesso!")
end

local function fakeout()
    createInfoBox("Aimbot", "Carregando Aimbot...")
    loadstring(game:HttpGet("https://raw.githubusercontent.com/Exunys/Aimbot-Script/refs/heads/main/Aimbot%20Script.lua"))()
    createInfoBox("Aimbot", "Aimbot carregado com sucesso!")
end

Tab2:AddButton({
    Name = "Infinite Yield",
    Callback = onButtonClick
})

Tab2:AddButton({
    Name = "Fe Invisible",
    Callback = InvisExec
})

Tab2:AddButton({
    Name = "Aimbot",
    Callback = fakeout
})

-- Criar a aba TROLL
local Tab3 = Window:MakeTab({
    Name = "TROLL",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- Fun√ß√£o para selecionar o jogador e mostrar notifica√ß√£o
local function selectPlayer(player)
    selectedPlayer = player
    createInfoBox("Jogador Selecionado", "Voc√™ selecionou: " .. player.Name)
end

-- Fun√ß√£o para iniciar/desativar o Loop TP
local function toggleLoopTP()
    if selectedPlayer then
        isLooping = not isLooping
        if isLooping then
            createInfoBox("Loop TP", "Iniciando teleporte para " .. selectedPlayer.Name)
            while isLooping do
                if selectedPlayer and selectedPlayer.Character and selectedPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    game.Players.LocalPlayer.Character:MoveTo(selectedPlayer.Character.HumanoidRootPart.Position)
                end
                wait(1)
            end
        else
            createInfoBox("Loop TP", "Teleporte em loop desativado!")
        end
    else
        createInfoBox("Loop TP", "Selecione um jogador primeiro!")
    end
end

-- Fun√ß√£o para teleporte √∫nico para o jogador selecionado
local function teleportOnce()
    if selectedPlayer then
        if selectedPlayer.Character and selectedPlayer.Character:FindFirstChild("HumanoidRootPart") then
            game.Players.LocalPlayer.Character:MoveTo(selectedPlayer.Character.HumanoidRootPart.Position)
            createInfoBox("Teleporte √önico", "Voc√™ foi teleportado para " .. selectedPlayer.Name)
        end
    else
        createInfoBox("Teleporte √önico", "Selecione um jogador primeiro!")
    end
end

-- Dropdown para selecionar um jogador para a√ß√µes de TROLL
Tab3:AddDropdown({
    Name = "Selecione um Jogador",
    Options = updatePlayerList(),
    Callback = function(option)
        for _, player in pairs(game.Players:GetPlayers()) do
            if player.Name == option then
                selectPlayer(player)
                break
            end
        end
    end
})

-- Bot√µes para a√ß√µes de TROLL
Tab3:AddButton({
    Name = "Teleportar uma vez",
    Callback = teleportOnce
})

Tab3:AddButton({
    Name = "Loop TP",
    Callback = toggleLoopTP
})

-- Fechar o Menu quando pressionar ESC
game:GetService("UserInputService").InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.Escape then
        OrionLib:Destroy()
    end
end)
